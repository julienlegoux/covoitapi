{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "CovoitAPI - Full Test Suite",
		"description": "Comprehensive test collection for CovoitAPI covering all V1 and VP routes.\n\n**Flow:**\n1. Health check\n2. Auth (register + login)\n3. Create driver\n4. Admin login\n5. Admin creates brands, colors, cities\n6. Driver creates cars, trips\n7. Passenger creates inscriptions\n8. Test all CRUD operations\n9. VP routes full flow\n10. Cleanup\n\n**Variables set automatically by test scripts:**\n- `token`, `userId` — from register/login\n- `adminToken` — from admin login\n- `driverId`, `carId`, `brandId`, `colorId`, `cityId`, `tripId`, `inscriptionId`\n- VP equivalents: `vpToken`, `vpUserId`, `vpCarId`, `vpTripId`, etc.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "https://covoitapi-git-develop-julien-legouxs-projects.vercel.app/api"
		},
		{
			"key": "baseUrlVp",
			"value": "https://covoitapi-git-develop-julien-legouxs-projects.vercel.app/api/vp"
		},
		{
			"key": "token",
			"value": ""
		},
		{
			"key": "adminToken",
			"value": ""
		},
		{
			"key": "userId",
			"value": ""
		},
		{
			"key": "driverId",
			"value": ""
		},
		{
			"key": "brandId",
			"value": ""
		},
		{
			"key": "colorId",
			"value": ""
		},
		{
			"key": "cityId",
			"value": ""
		},
		{
			"key": "cityId2",
			"value": ""
		},
		{
			"key": "carId",
			"value": ""
		},
		{
			"key": "tripId",
			"value": ""
		},
		{
			"key": "inscriptionId",
			"value": ""
		},
		{
			"key": "testEmail",
			"value": ""
		},
		{
			"key": "testPassword",
			"value": "TestPass123"
		},
		{
			"key": "adminEmail",
			"value": "admin@covoitapi.com"
		},
		{
			"key": "adminPassword",
			"value": "Admin123!"
		},
		{
			"key": "vpToken",
			"value": ""
		},
		{
			"key": "vpUserId",
			"value": ""
		},
		{
			"key": "vpBrandId",
			"value": ""
		},
		{
			"key": "vpCarId",
			"value": ""
		},
		{
			"key": "vpTripId",
			"value": ""
		},
		{
			"key": "vpInscriptionUserId",
			"value": ""
		},
		{
			"key": "vpInscriptionToken",
			"value": ""
		},
		{
			"key": "bypassToken",
			"value": "iTJZ9hSQOcbj55DWU5fgA67szmg1G4h5"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Generate unique email for this test run",
					"if (!pm.collectionVariables.get('testEmail') || pm.collectionVariables.get('testEmail') === '') {",
					"    const unique = Date.now();",
					"    pm.collectionVariables.set('testEmail', `testuser_${unique}@test.com`);",
					"}"
				]
			}
		}
	],
	"item": [
		{
			"name": "V1 - Core API",
			"item": [
				{
					"name": "00 - Health & Auth",
					"item": [
						{
							"name": "Health Check",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/health",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"health"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Has status ok', () => pm.expect(body.status).to.eql('ok'));",
											"pm.test('Has timestamp', () => pm.expect(body.timestamp).to.be.a('string'));"
										]
									}
								}
							]
						},
						{
							"name": "Register",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - User created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"pm.test('Response contains userId', () => pm.expect(body.data.userId).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('token', body.data.token);",
											"    pm.collectionVariables.set('userId', body.data.userId);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Register - Duplicate (expect 409)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 409 - User already exists', () => pm.response.to.have.status(409));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));",
											"pm.test('Error code is USER_ALREADY_EXISTS', () => pm.expect(body.error.code).to.eql('USER_ALREADY_EXISTS'));"
										]
									}
								}
							]
						},
						{
							"name": "Register - Invalid body (expect 400)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"not-an-email\",\n  \"password\": \"short\",\n  \"confirmPassword\": \"nomatch\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 400 - Validation error', () => pm.response.to.have.status(400));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Login",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"pm.test('Response contains userId', () => pm.expect(body.data.userId).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('token', body.data.token);",
											"    pm.collectionVariables.set('userId', body.data.userId);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Login - Invalid credentials (expect 401)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"WrongPassword123\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 401 - Invalid credentials', () => pm.response.to.have.status(401));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));",
											"pm.test('Error code is INVALID_CREDENTIALS', () => pm.expect(body.error.code).to.eql('INVALID_CREDENTIALS'));"
										]
									}
								}
							]
						},
						{
							"name": "Login - No auth header (expect 401)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"me"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 401 - Unauthorized', () => pm.response.to.have.status(401));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "01 - Users",
					"item": [
						{
							"name": "Complete Profile (PATCH /me)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"phone\": \"0612345678\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/users/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"me"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Profile updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "Get User by ID",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{userId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{userId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains user fields', () => {",
											"    pm.expect(body.data).to.have.property('id');",
											"    pm.expect(body.data).to.have.property('email');",
											"});"
										]
									}
								}
							]
						},
						{
							"name": "List Users (expect 403 - ADMIN only)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN role', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "02 - Drivers",
					"item": [
						{
							"name": "Create Driver",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"licenseNumber\": \"DRV-TEST-12345\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/drivers",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"drivers"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Driver created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains driver id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('driverId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Re-Login (get DRIVER token)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Re-login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains new token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('token', body.data.token); }"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "03 - Admin Setup",
					"item": [
						{
							"name": "Admin Login",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Admin login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains admin token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('adminToken', body.data.token); }"
										]
									}
								}
							]
						},
						{
							"name": "Admin List Users",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data is an array', () => pm.expect(body.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Create Brand",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"TestBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/brands",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Brand created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains brand id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('brandId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Admin Create Color",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"TestRed\",\n  \"hex\": \"#FF0000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/colors",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Color created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains color id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('colorId', body.data.id); }"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "04 - Cities",
					"item": [
						{
							"name": "Create City (departure)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"cityName\": \"Paris\",\n  \"zipcode\": \"75000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cities",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - City created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains city id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('cityId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Create City (arrival)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"cityName\": \"Lyon\",\n  \"zipcode\": \"69000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cities",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - City created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"if (body.data) { pm.collectionVariables.set('cityId2', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "List Cities",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is a non-empty array', () => pm.expect(body.data.data).to.be.an('array').that.is.not.empty);",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "Delete City (expect 403 - ADMIN only)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities/{{cityId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities",
										"{{cityId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN role', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "05 - Brands",
					"item": [
						{
							"name": "List Brands",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/brands?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "Create Brand (expect 403 - ADMIN only)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"ForbiddenBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/brands",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN role', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "06 - Colors",
					"item": [
						{
							"name": "List Colors",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is a non-empty array', () => pm.expect(body.data.data).to.be.an('array').that.is.not.empty);",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "Patch Color (Admin)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"UpdatedRed\",\n  \"hex\": \"#EE0000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/colors/{{colorId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors",
										"{{colorId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Color updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "07 - Cars",
					"item": [
						{
							"name": "Create Car",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"model\": \"Corolla\",\n  \"brandId\": \"{{brandId}}\",\n  \"licensePlate\": \"AB-123-CD\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cars",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Car created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains car id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('carId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "List Cars",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "Update Car (PUT)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"model\": \"Camry\",\n  \"brandId\": \"{{brandId}}\",\n  \"licensePlate\": \"EF-456-GH\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Car updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "Patch Car",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"licensePlate\": \"IJ-789-KL\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Car patched', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "08 - Trips",
					"item": [
						{
							"name": "Create Trip",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"kms\": 465,\n  \"date\": \"2026-06-15\",\n  \"departureCity\": \"Paris\",\n  \"arrivalCity\": \"Lyon\",\n  \"seats\": 3,\n  \"carId\": \"{{carId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/trips",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Trip created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains trip id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('tripId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Get Trip",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains trip fields', () => pm.expect(body.data.id).to.be.a('string'));"
										]
									}
								}
							]
						},
						{
							"name": "List Trips",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data is an array', () => pm.expect(body.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "Search Trips",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/search?departureCity=Paris&arrivalCity=Lyon&date=2026-06-15",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"search"
									],
									"query": [
										{
											"key": "departureCity",
											"value": "Paris"
										},
										{
											"key": "arrivalCity",
											"value": "Lyon"
										},
										{
											"key": "date",
											"value": "2026-06-15"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data is an array', () => pm.expect(body.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "List Trip Passengers",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}/passengers?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}",
										"passengers"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "09 - Inscriptions",
					"item": [
						{
							"name": "Create Inscription",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"tripId\": \"{{tripId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 201 - Inscription created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains inscription id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('inscriptionId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Create Inscription - Duplicate (expect 409)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"tripId\": \"{{tripId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 409 - Already inscribed', () => pm.response.to.have.status(409));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "List Inscriptions",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "List User Inscriptions",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{userId}}/inscriptions?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{userId}}",
										"inscriptions"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "Delete Inscription",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions/{{inscriptionId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions",
										"{{inscriptionId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('inscriptionId');",
											"if (!id) { pm.test('SKIP - No inscriptionId', () => true); return; }",
											"pm.test('Status 204 - Inscription deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "10 - Cleanup (V1)",
					"item": [
						{
							"name": "Delete Trip",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('tripId');",
											"if (!id) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 204 - Trip deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Delete Car",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('carId');",
											"if (!id) { pm.test('SKIP - No carId', () => true); return; }",
											"pm.test('Status 204 - Car deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete Color",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors/{{colorId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors",
										"{{colorId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('colorId');",
											"if (!id) { pm.test('SKIP - No colorId', () => true); return; }",
											"pm.test('Status 204 - Color deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete Brand",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/brands/{{brandId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands",
										"{{brandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('brandId');",
											"if (!id) { pm.test('SKIP - No brandId', () => true); return; }",
											"pm.test('Status 204 - Brand deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete City (departure)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities/{{cityId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities",
										"{{cityId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('cityId');",
											"if (!id) { pm.test('SKIP - No cityId', () => true); return; }",
											"pm.test('Status 204 - City deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete City (arrival)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities/{{cityId2}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities",
										"{{cityId2}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('cityId2');",
											"if (!id) { pm.test('SKIP - No cityId2', () => true); return; }",
											"pm.test('Status 204 - City deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Anonymize User (GDPR)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"me"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 204 - User anonymized', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Verify User anonymized (expect 404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{userId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{userId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - User not found after anonymization', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));",
											"pm.test('Error code is USER_NOT_FOUND', () => pm.expect(body.error.code).to.eql('USER_NOT_FOUND'));"
										]
									}
								}
							]
						}
					]
				}
			]
		},
		{
			"name": "VP - Alternate API",
			"item": [
				{
					"name": "00 - VP Auth",
					"item": [
						{
							"name": "VP Register",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/register",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const unique = Date.now();",
											"pm.collectionVariables.set('testEmail', `vpuser_${unique}@test.com`);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - VP User registered', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('vpToken', body.data.token);",
											"    pm.collectionVariables.set('vpUserId', body.data.userId);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "VP Login",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/login",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - VP Login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('vpToken', body.data.token); }"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "01 - VP Persons",
					"item": [
						{
							"name": "VP Create Person",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstname\": \"Jean\",\n  \"lastname\": \"Dupont\",\n  \"phone\": \"0698765432\",\n  \"email\": \"jean.dupont_{{$timestamp}}@test.com\",\n  \"password\": \"SecurePass1\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/persons",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Person created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"if (body.data) {",
											"    pm.collectionVariables.set('vpInscriptionUserId', body.data.id);",
											"    if (body.data.token) pm.collectionVariables.set('vpInscriptionToken', body.data.token);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "VP List Persons",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data is an array', () => pm.expect(body.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Person",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains person', () => pm.expect(body.data).to.have.property('id'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Patch Person",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstname\": \"UpdatedJean\",\n  \"phone\": \"0699999999\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Person updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Person Trips (driver)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}/trips-driver",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}",
										"trips-driver"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Person Trips (passenger)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}/trips-passenger?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}",
										"trips-passenger"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "02 - VP Brands",
					"item": [
						{
							"name": "VP List Brands",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/brands?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Admin Create Brand",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"VPTestBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/brands",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - VP Brand created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"if (body.data) { pm.collectionVariables.set('vpBrandId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "VP Admin Update Brand (PUT)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"VPUpdatedBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/brands/{{vpBrandId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands",
										"{{vpBrandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpBrandId');",
											"if (!id) { pm.test('SKIP - No vpBrandId', () => true); return; }",
											"pm.test('Status 200 - VP Brand updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Create Brand (expect 403)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"ForbiddenBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/brands",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "03 - VP Cars",
					"item": [
						{
							"name": "VP Create Car (needs DRIVER role - setup first)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"carregistration\": \"VP-123-AB\",\n  \"model\": \"Clio\",\n  \"brand\": \"VPUpdatedBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/cars",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"// May need DRIVER role - test what we get",
											"const status = pm.response.code;",
											"if (status === 201) {",
											"    pm.test('Status 201 - VP Car created', () => true);",
											"    const body = pm.response.json();",
											"    pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"    if (body.data) { pm.collectionVariables.set('vpCarId', body.data.id); }",
											"} else if (status === 403) {",
											"    pm.test('Status 403 - Requires DRIVER role (expected for USER)', () => true);",
											"} else {",
											"    pm.test(`Unexpected status ${status}`, () => pm.response.to.have.status(201));",
											"}",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP List Cars",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Car",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars/{{vpCarId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"{{vpCarId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpCarId');",
											"if (!id) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Update Car (PUT)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"carregistration\": \"VP-456-CD\",\n  \"model\": \"Megane\",\n  \"brand\": \"VPUpdatedBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/cars/{{vpCarId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"{{vpCarId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpCarId');",
											"if (!id) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"pm.test('Status 200 - VP Car updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "04 - VP Trips",
					"item": [
						{
							"name": "VP Create Trip",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"kms\": 300,\n  \"trip_datetime\": \"2026-07-01T08:00:00Z\",\n  \"seats\": 3,\n  \"car_id\": \"{{vpCarId}}\",\n  \"person_id\": \"{{vpUserId}}\",\n  \"starting_address\": {\n    \"street_number\": \"1\",\n    \"street_name\": \"Rue de la Paix\",\n    \"postal_code\": \"75001\",\n    \"city_name\": \"Paris\"\n  },\n  \"arrival_address\": {\n    \"street_number\": \"10\",\n    \"street_name\": \"Place Bellecour\",\n    \"postal_code\": \"69002\",\n    \"city_name\": \"Lyon\"\n  }\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/trips",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const carId = pm.collectionVariables.get('vpCarId');",
											"if (!carId) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"const status = pm.response.code;",
											"if (status === 201) {",
											"    pm.test('Status 201 - VP Trip created', () => true);",
											"    const body = pm.response.json();",
											"    pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"    if (body.data) { pm.collectionVariables.set('vpTripId', body.data.id); }",
											"} else {",
											"    pm.test(`Status ${status} - Trip creation`, () => true);",
											"}",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP List Trips",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP List Trips (with search filters)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips?startingcity=Paris&arrivalcity=Lyon&tripdate=2026-07-01",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips"
									],
									"query": [
										{
											"key": "startingcity",
											"value": "Paris"
										},
										{
											"key": "arrivalcity",
											"value": "Lyon"
										},
										{
											"key": "tripdate",
											"value": "2026-07-01"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Trip",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpTripId');",
											"if (!id) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Patch Trip",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"seats\": 4\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpTripId');",
											"if (!id) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 200 - VP Trip patched', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Create Trip Inscription",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpInscriptionToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"person_id\": \"{{vpInscriptionUserId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}/person",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}",
										"person"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('vpTripId');",
											"const personId = pm.collectionVariables.get('vpInscriptionUserId');",
											"if (!tripId || !personId) { pm.test('SKIP - No vpTripId or vpInscriptionUserId', () => true); return; }",
											"pm.test('Status 201 - Inscription created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Trip Passengers",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}/person?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}",
										"person"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpTripId');",
											"if (!id) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "05 - VP Cleanup",
					"item": [
						{
							"name": "VP Delete Trip",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpTripId');",
											"if (!id) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 204 - VP Trip deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Car",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars/{{vpCarId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"{{vpCarId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpCarId');",
											"if (!id) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"pm.test('Status 204 - VP Car deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Admin Delete Brand",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/brands/{{vpBrandId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands",
										"{{vpBrandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpBrandId');",
											"if (!id) { pm.test('SKIP - No vpBrandId', () => true); return; }",
											"pm.test('Status 204 - VP Brand deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Person",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 204 - VP Person deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Inscription Person",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpInscriptionToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpInscriptionUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpInscriptionUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpInscriptionUserId');",
											"if (!id) { pm.test('SKIP - No vpInscriptionUserId', () => true); return; }",
											"pm.test('Status 204 - VP Inscription person deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				}
			]
		}
	]
}
