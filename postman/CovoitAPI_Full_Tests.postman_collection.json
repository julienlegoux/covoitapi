{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "CovoitAPI - Full Test Suite",
		"description": "Comprehensive test collection for CovoitAPI covering all V1 and VP routes.\n\n**Flow:**\n1. Health check\n2. Auth (register + login)\n3. Create driver\n4. Admin login\n5. Admin creates brands, colors, cities\n6. Driver creates cars, trips\n7. Passenger creates inscriptions\n8. Test all CRUD operations\n9. VP routes full flow\n10. Cleanup\n\n**Variables set automatically by test scripts:**\n- `token`, `userId` — from register/login\n- `adminToken` — from admin login\n- `driverId`, `carId`, `brandId`, `colorId`, `cityId`, `tripId`, `inscriptionId`\n- VP equivalents: `vpToken`, `vpUserId`, `vpCarId`, `vpTripId`, etc.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{
			"key": "baseUrl",
			"value": "https://covoitapi-git-develop-julien-legouxs-projects.vercel.app/api"
		},
		{
			"key": "baseUrlVp",
			"value": "https://covoitapi-git-develop-julien-legouxs-projects.vercel.app/api/vp"
		},
		{
			"key": "token",
			"value": ""
		},
		{
			"key": "adminToken",
			"value": ""
		},
		{
			"key": "userId",
			"value": ""
		},
		{
			"key": "driverId",
			"value": ""
		},
		{
			"key": "brandId",
			"value": ""
		},
		{
			"key": "colorId",
			"value": ""
		},
		{
			"key": "cityId",
			"value": ""
		},
		{
			"key": "cityId2",
			"value": ""
		},
		{
			"key": "carId",
			"value": ""
		},
		{
			"key": "tripId",
			"value": ""
		},
		{
			"key": "inscriptionId",
			"value": ""
		},
		{
			"key": "testEmail",
			"value": ""
		},
		{
			"key": "testPassword",
			"value": "TestPass123"
		},
		{
			"key": "adminEmail",
			"value": "admin@covoitapi.test"
		},
		{
			"key": "adminPassword",
			"value": "AdminPassword1"
		},
		{
			"key": "vpToken",
			"value": ""
		},
		{
			"key": "vpUserId",
			"value": ""
		},
		{
			"key": "vpBrandId",
			"value": ""
		},
		{
			"key": "vpCarId",
			"value": ""
		},
		{
			"key": "vpTripId",
			"value": ""
		},
		{
			"key": "vpInscriptionUserId",
			"value": ""
		},
		{
			"key": "vpInscriptionToken",
			"value": ""
		},
		{
			"key": "bypassToken",
			"value": "iTJZ9hSQOcbj55DWU5fgA67szmg1G4h5"
		},
		{
			"key": "secondaryUserId",
			"value": ""
		},
		{
			"key": "secondaryToken",
			"value": ""
		},
		{
			"key": "secondaryEmail",
			"value": ""
		},
		{
			"key": "vpInscriptionEmail",
			"value": ""
		},
		{
			"key": "driverLicense",
			"value": ""
		},
		{
			"key": "vpDriverLicense",
			"value": ""
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Generate unique email for this test run",
					"if (!pm.collectionVariables.get('testEmail') || pm.collectionVariables.get('testEmail') === '') {",
					"    const unique = Date.now();",
					"    pm.collectionVariables.set('testEmail', `testuser_${unique}@test.com`);",
					"}"
				]
			}
		}
	],
	"item": [
		{
			"name": "V1 - Core API",
			"item": [
				{
					"name": "00 - Health & Auth",
					"item": [
						{
							"name": "Health Check",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/health",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"health"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Has status ok', () => pm.expect(body.status).to.eql('ok'));",
											"pm.test('Has timestamp', () => pm.expect(body.timestamp).to.be.a('string'));"
										]
									}
								}
							]
						},
						{
							"name": "Register",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - User created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"pm.test('Response contains userId', () => pm.expect(body.data.userId).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('token', body.data.token);",
											"    pm.collectionVariables.set('userId', body.data.userId);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Register - Duplicate (expect 409)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 409 - User already exists', () => pm.response.to.have.status(409));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));",
											"pm.test('Error code is USER_ALREADY_EXISTS', () => pm.expect(body.error.code).to.eql('USER_ALREADY_EXISTS'));"
										]
									}
								}
							]
						},
						{
							"name": "Register - Invalid body (expect 400)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"not-an-email\",\n  \"password\": \"short\",\n  \"confirmPassword\": \"nomatch\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 400 - Validation error', () => pm.response.to.have.status(400));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Login",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"pm.test('Response contains userId', () => pm.expect(body.data.userId).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('token', body.data.token);",
											"    pm.collectionVariables.set('userId', body.data.userId);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Login - Invalid credentials (expect 401)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"WrongPassword123\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 401 - Invalid credentials', () => pm.response.to.have.status(401));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));",
											"pm.test('Error code is INVALID_CREDENTIALS', () => pm.expect(body.error.code).to.eql('INVALID_CREDENTIALS'));"
										]
									}
								}
							]
						},
						{
							"name": "Login - No auth header (expect 401)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"me"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 401 - Unauthorized', () => pm.response.to.have.status(401));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "01 - Users",
					"item": [
						{
							"name": "Complete Profile (PATCH /me)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"phone\": \"0612345678\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/users/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"me"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('firstName matches input', () => pm.expect(body.data.firstName).to.eql('Test'));",
											"pm.test('lastName matches input', () => pm.expect(body.data.lastName).to.eql('User'));",
											"pm.test('phone matches input', () => pm.expect(body.data.phone).to.eql('0612345678'));"
										]
									}
								}
							]
						},
						{
							"name": "Get User by ID",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{userId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{userId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id (UUID)', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('Has email', () => pm.expect(body.data.email).to.be.a('string'));",
											"pm.test('Has firstName', () => pm.expect(body.data.firstName).to.eql('Test'));",
											"pm.test('Has lastName', () => pm.expect(body.data.lastName).to.eql('User'));",
											"pm.test('Has phone', () => pm.expect(body.data.phone).to.eql('0612345678'));",
											"pm.test('Has createdAt', () => pm.expect(body.data.createdAt).to.be.a('string'));",
											"pm.test('Has updatedAt', () => pm.expect(body.data.updatedAt).to.be.a('string'));"
										]
									}
								}
							]
						},
						{
							"name": "List Users (expect 403 - ADMIN only)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN role', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "02 - Drivers",
					"item": [
						{
							"name": "Create Driver",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"driverLicense\": \"{{driverLicense}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/drivers",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"drivers"
									]
								}
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const license = `DRV-${Date.now()}`;",
											"pm.collectionVariables.set('driverLicense', license);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Driver created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id (UUID)', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('driverLicense matches input', () => pm.expect(body.data.driverLicense).to.eql(pm.collectionVariables.get('driverLicense')));",
											"if (body.data) {",
											"    pm.collectionVariables.set('driverId', body.data.id);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Re-Login (get DRIVER token)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Re-login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains new token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('token', body.data.token); }"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "03 - Admin Setup",
					"item": [
						{
							"name": "Admin Login",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{adminEmail}}\",\n  \"password\": \"{{adminPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/auth/login",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Admin login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains admin token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('adminToken', body.data.token); }"
										]
									}
								}
							]
						},
						{
							"name": "Admin List Users",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data is an array', () => pm.expect(body.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Create Brand",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"TestBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/brands",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Brand created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains brand id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('brandId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Admin Create Color",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"TestRed\",\n  \"hex\": \"#FF0000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/colors",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Color created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains color id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('colorId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Register Secondary User (for admin-delete test)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/auth/register",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"auth",
										"register"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{secondaryEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Secondary user created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"if (body.data) {",
											"    pm.collectionVariables.set('secondaryUserId', body.data.userId);",
											"    pm.collectionVariables.set('secondaryToken', body.data.token);",
											"}"
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"// Wait 61s for register rate limit window (3 req/min) to reset",
											"console.log('Waiting 61s for rate limit window to reset...');",
											"await new Promise(resolve => setTimeout(resolve, 61000));",
											"const unique = Date.now();",
											"pm.collectionVariables.set('secondaryEmail', `secondary_${unique}@test.com`);"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "04 - Cities",
					"item": [
						{
							"name": "Create City (departure)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"cityName\": \"Paris\",\n  \"zipcode\": \"75000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cities",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - City created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data contains city id', () => pm.expect(body.data.id).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('cityId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "Create City (arrival)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"cityName\": \"Lyon\",\n  \"zipcode\": \"69000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cities",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - City created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"if (body.data) { pm.collectionVariables.set('cityId2', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "List Cities",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is a non-empty array', () => pm.expect(body.data.data).to.be.an('array').that.is.not.empty);",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "Delete City (expect 403 - ADMIN only)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities/{{cityId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities",
										"{{cityId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN role', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "05 - Brands",
					"item": [
						{
							"name": "List Brands",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/brands?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "Create Brand (expect 403 - ADMIN only)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"ForbiddenBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/brands",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN role', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "06 - Colors",
					"item": [
						{
							"name": "List Colors",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is a non-empty array', () => pm.expect(body.data.data).to.be.an('array').that.is.not.empty);",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "Patch Color (Admin)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"UpdatedRed\",\n  \"hex\": \"#EE0000\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/colors/{{colorId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors",
										"{{colorId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Color updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "07 - Cars",
					"item": [
						{
							"name": "Create Car",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"model\": \"Corolla\",\n  \"brandId\": \"{{brandId}}\",\n  \"licensePlate\": \"AB-123-CD\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cars",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Car created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id (UUID)', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('Has modelRefId', () => pm.expect(body.data.modelRefId).to.be.a('number'));",
											"pm.test('licensePlate matches input', () => pm.expect(body.data.licensePlate).to.eql('AB-123-CD'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('carId', body.data.id);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "List Cars",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "Update Car (PUT)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"model\": \"Camry\",\n  \"brandId\": \"{{brandId}}\",\n  \"licensePlate\": \"EF-456-GH\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has modelRefId', () => pm.expect(body.data.modelRefId).to.be.a('number'));",
											"pm.test('licensePlate updated', () => pm.expect(body.data.licensePlate).to.eql('EF-456-GH'));"
										]
									}
								}
							]
						},
						{
							"name": "Patch Car",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"licensePlate\": \"IJ-789-KL\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('licensePlate updated', () => pm.expect(body.data.licensePlate).to.eql('IJ-789-KL'));",
											"pm.test('Has modelRefId', () => pm.expect(body.data.modelRefId).to.be.a('number'));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "08 - Trips",
					"item": [
						{
							"name": "Create Trip",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"kms\": 465,\n  \"date\": \"2026-06-15\",\n  \"departureCity\": \"Paris\",\n  \"arrivalCity\": \"Lyon\",\n  \"seats\": 3,\n  \"carId\": \"{{carId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/trips",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Trip created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id (UUID)', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('kms matches input', () => pm.expect(body.data.kms).to.eql(465));",
											"pm.test('seats matches input', () => pm.expect(body.data.seats).to.eql(3));",
											"if (body.data) {",
											"    pm.collectionVariables.set('tripId', body.data.id);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Get Trip",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('Has kms', () => pm.expect(body.data.kms).to.be.a('number'));",
											"pm.test('Has seats', () => pm.expect(body.data.seats).to.be.a('number'));",
											"pm.test('Has dateTrip', () => pm.expect(body.data.dateTrip).to.be.a('string'));"
										]
									}
								}
							]
						},
						{
							"name": "List Trips",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data has data array', () => pm.expect(body.data.data).to.be.an('array'));",
											"pm.test('Data has meta', () => pm.expect(body.data.meta).to.be.an('object'));",
											"if (body.data.data.length > 0) {",
											"    const trip = body.data.data[0];",
											"    pm.test('Trip has id', () => pm.expect(trip.id).to.be.a('string'));",
											"    pm.test('Trip has kms', () => pm.expect(trip.kms).to.be.a('number'));",
											"    pm.test('Trip has seats', () => pm.expect(trip.seats).to.be.a('number'));",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Search Trips",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/search?departureCity=Paris&arrivalCity=Lyon&date=2026-06-15",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"search"
									],
									"query": [
										{
											"key": "departureCity",
											"value": "Paris"
										},
										{
											"key": "arrivalCity",
											"value": "Lyon"
										},
										{
											"key": "date",
											"value": "2026-06-15"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data is an array', () => pm.expect(body.data).to.be.an('array'));",
											"if (body.data.length > 0) {",
											"    pm.test('Results contain trips (search returned data)', () => pm.expect(body.data.length).to.be.above(0));",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "List Trip Passengers",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}/passengers?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}",
										"passengers"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "09 - Inscriptions",
					"item": [
						{
							"name": "Create Inscription",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"tripId\": \"{{tripId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 201 - Inscription created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id (UUID)', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('Has status', () => pm.expect(body.data.status).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('inscriptionId', body.data.id);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "Create Inscription - Duplicate (expect 409)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"tripId\": \"{{tripId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('tripId');",
											"if (!tripId) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 409 - Already inscribed', () => pm.response.to.have.status(409));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "List Inscriptions",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));",
											"pm.test('Pagination meta is present', () => pm.expect(body.data.meta).to.be.an('object'));"
										]
									}
								}
							]
						},
						{
							"name": "List User Inscriptions",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{userId}}/inscriptions?page=1&limit=20",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{userId}}",
										"inscriptions"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Paginated data.data is an array', () => pm.expect(body.data.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "Delete Inscription",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions/{{inscriptionId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions",
										"{{inscriptionId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('inscriptionId');",
											"if (!id) { pm.test('SKIP - No inscriptionId', () => true); return; }",
											"pm.test('Status 204 - Inscription deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "09b - Not Found Tests (404)",
					"item": [
						{
							"name": "Get non-existent User (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Get non-existent Trip (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Get non-existent Trip Passengers (200 - empty)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/00000000-0000-0000-0000-000000000000/passengers",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"00000000-0000-0000-0000-000000000000",
										"passengers"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - Returns empty list', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data array is empty', () => pm.expect(body.data.data).to.be.an('array').that.is.empty);"
										]
									}
								}
							]
						},
						{
							"name": "Delete non-existent Trip (404)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete non-existent Inscription (404)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/inscriptions/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"inscriptions",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "PUT non-existent Car (404)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"00000000-0000-0000-0000-000000000000"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"model\": \"Test\",\n  \"brandId\": \"{{brandId}}\",\n  \"licensePlate\": \"XX-000-XX\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "PATCH non-existent Car (404)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"00000000-0000-0000-0000-000000000000"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"licensePlate\": \"XX-000-XX\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete non-existent Car (404)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "09c - Authorization Tests (403)",
					"item": [
						{
							"name": "Create Color (expect 403 - non-admin)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"ForbiddenColor\",\n  \"hex\": \"#000000\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Patch Color (expect 403 - non-admin)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors/{{colorId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors",
										"{{colorId}}"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"ForbiddenUpdate\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('colorId');",
											"if (!id) { pm.test('SKIP - No colorId', () => true); return; }",
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete Color (expect 403 - non-admin)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors/{{colorId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors",
										"{{colorId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('colorId');",
											"if (!id) { pm.test('SKIP - No colorId', () => true); return; }",
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete Brand (expect 403 - non-admin)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/brands/{{brandId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands",
										"{{brandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('brandId');",
											"if (!id) { pm.test('SKIP - No brandId', () => true); return; }",
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete User (expect 403 - non-admin)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Update another user car (expect 404 - ownership filter)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"model\": \"Stolen\",\n  \"brandId\": \"{{brandId}}\",\n  \"licensePlate\": \"HACK-01\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('carId');",
											"if (!id) { pm.test('SKIP - No carId', () => true); return; }",
											"pm.test('Status 404 - Not found (ownership filter)', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete another user car (expect 404 - ownership filter)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('carId');",
											"if (!id) { pm.test('SKIP - No carId', () => true); return; }",
											"pm.test('Status 404 - Not found (ownership filter)', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete another user trip (expect 404 - ownership filter)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('tripId');",
											"if (!id) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 404 - Not found (ownership filter)', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "10 - Cleanup (V1)",
					"item": [
						{
							"name": "Delete Trip",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('tripId');",
											"if (!id) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 204 - Trip deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Verify Trip Deleted (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/trips/{{tripId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"trips",
										"{{tripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('tripId');",
											"if (!id) { pm.test('SKIP - No tripId', () => true); return; }",
											"pm.test('Status 404 - Confirmed deleted', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Delete Car",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('carId');",
											"if (!id) { pm.test('SKIP - No carId', () => true); return; }",
											"pm.test('Status 204 - Car deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Verify Car Deleted (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cars/{{carId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cars",
										"{{carId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('carId');",
											"if (!id) { pm.test('SKIP - No carId', () => true); return; }",
											"pm.test('Status 404 - Confirmed deleted', () => pm.response.to.have.status(404));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete Color",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors/{{colorId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors",
										"{{colorId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('colorId');",
											"if (!id) { pm.test('SKIP - No colorId', () => true); return; }",
											"pm.test('Status 204 - Color deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Verify Color Deleted (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/colors/{{colorId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"colors",
										"{{colorId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('colorId');",
											"if (!id) { pm.test('SKIP - No colorId', () => true); return; }",
											"pm.test('Status 404 - Confirmed deleted', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete Brand",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/brands/{{brandId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands",
										"{{brandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('brandId');",
											"if (!id) { pm.test('SKIP - No brandId', () => true); return; }",
											"pm.test('Status 204 - Brand deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Verify Brand Deleted (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/brands/{{brandId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"brands",
										"{{brandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('brandId');",
											"if (!id) { pm.test('SKIP - No brandId', () => true); return; }",
											"pm.test('Status 404 - Confirmed deleted', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete City (departure)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities/{{cityId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities",
										"{{cityId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('cityId');",
											"if (!id) { pm.test('SKIP - No cityId', () => true); return; }",
											"pm.test('Status 204 - City deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Delete City (arrival)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/cities/{{cityId2}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"cities",
										"{{cityId2}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('cityId2');",
											"if (!id) { pm.test('SKIP - No cityId2', () => true); return; }",
											"pm.test('Status 204 - City deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Admin Anonymize User by ID",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{secondaryUserId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{secondaryUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('secondaryUserId');",
											"if (!id) { pm.test('SKIP - No secondaryUserId', () => true); return; }",
											"pm.test('Status 204 - User anonymized by admin', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Verify Admin-Anonymized User (expect 404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{secondaryUserId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{secondaryUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('secondaryUserId');",
											"if (!id) { pm.test('SKIP - No secondaryUserId', () => true); return; }",
											"pm.test('Status 404 - User not found after admin anonymize', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "Anonymize User (GDPR)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{token}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/me",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"me"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 204 - User anonymized', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "Verify User anonymized (expect 404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/users/{{userId}}",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"users",
										"{{userId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - User not found after anonymization', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:false', () => pm.expect(body.success).to.eql(false));",
											"pm.test('Error code is USER_NOT_FOUND', () => pm.expect(body.error.code).to.eql('USER_NOT_FOUND'));"
										]
									}
								}
							]
						}
					]
				}
			]
		},
		{
			"name": "VP - Alternate API",
			"item": [
				{
					"name": "00 - VP Auth",
					"item": [
						{
							"name": "VP Register",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/register",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"register"
									]
								}
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const unique = Date.now();",
											"pm.collectionVariables.set('testEmail', `vpuser_${unique}@test.com`);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - VP User registered', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('vpToken', body.data.token);",
											"    pm.collectionVariables.set('vpUserId', body.data.userId);",
											"}"
										]
									}
								}
							]
						},
						{
							"name": "VP Login",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/login",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"login"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200 - VP Login successful', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Response contains token', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) { pm.collectionVariables.set('vpToken', body.data.token); }"
										]
									}
								}
							]
						},
						{
							"name": "VP Register - Duplicate (expect 409)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/register",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"register"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\",\n  \"confirmPassword\": \"{{testPassword}}\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 409 - Duplicate', () => pm.response.to.have.status(409));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Register - Invalid body (expect 400)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/register",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"register"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"not-an-email\",\n  \"password\": \"short\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 400 - Validation error', () => pm.response.to.have.status(400));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Login - Wrong password (expect 401)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/login",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"login"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"WrongPassword999\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 401 - Invalid credentials', () => pm.response.to.have.status(401));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Login - Non-existent email (expect 401)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/login",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"login"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"nonexistent_999@test.com\",\n  \"password\": \"AnyPassword1\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 401 - User not found', () => pm.response.to.have.status(401));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "01 - VP Persons",
					"item": [
						{
							"name": "VP Register Inscription User",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/register",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"register"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{vpInscriptionEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"if (body.data) {",
											"    pm.collectionVariables.set('vpInscriptionUserId', body.data.userId);",
											"    pm.collectionVariables.set('vpInscriptionToken', body.data.token);",
											"}"
										]
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const unique = Date.now();",
											"pm.collectionVariables.set('vpInscriptionEmail', `vpinscription_${unique}@test.com`);"
										]
									}
								}
							]
						},
						{
							"name": "VP Create Person",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstname\": \"Jean\",\n  \"lastname\": \"Dupont\",\n  \"phone\": \"0698765432\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/persons",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - Person profile updated', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('firstname matches', () => pm.expect(body.data.firstname).to.eql('Jean'));",
											"pm.test('lastname matches', () => pm.expect(body.data.lastname).to.eql('Dupont'));",
											"pm.test('phone matches', () => pm.expect(body.data.phone).to.eql('0698765432'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Update Inscription Person Profile",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpInscriptionToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstname\": \"Inscription\",\n  \"lastname\": \"User\",\n  \"phone\": \"0611111111\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP List Persons",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Data is an array', () => pm.expect(body.data).to.be.an('array'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Person",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('Has firstname', () => pm.expect(body.data.firstname).to.be.a('string'));",
											"pm.test('Has lastname', () => pm.expect(body.data.lastname).to.be.a('string'));",
											"pm.test('Has email', () => pm.expect(body.data.email).to.be.a('string'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Patch Person",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"firstname\": \"UpdatedJean\",\n  \"phone\": \"0699999999\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('firstname updated', () => pm.expect(body.data.firstname).to.eql('UpdatedJean'));",
											"pm.test('phone updated', () => pm.expect(body.data.phone).to.eql('0699999999'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Person Trips (driver)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}/trips-driver",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}",
										"trips-driver"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Person Trips (passenger)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}/trips-passenger?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}",
										"trips-passenger"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "02 - VP Brands",
					"item": [
						{
							"name": "VP List Brands",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/brands?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Admin Create Brand",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"VPTestBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/brands",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - VP Brand created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"if (body.data) { pm.collectionVariables.set('vpBrandId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "VP Admin Update Brand (PUT)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"VPUpdatedBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/brands/{{vpBrandId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands",
										"{{vpBrandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpBrandId');",
											"if (!id) { pm.test('SKIP - No vpBrandId', () => true); return; }",
											"pm.test('Status 200 - VP Brand updated', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Create Brand (expect 403)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"ForbiddenBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/brands",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Requires ADMIN', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "02b - VP Driver Setup",
					"item": [
						{
							"name": "VP Create Driver (via V1)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrl}}/v1/drivers",
									"host": [
										"{{baseUrl}}"
									],
									"path": [
										"v1",
										"drivers"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"driverLicense\": \"{{vpDriverLicense}}\"\n}"
								}
							},
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.collectionVariables.set('vpDriverLicense', `VP-DRV-${Date.now()}`);"
										]
									}
								},
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - VP Driver created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Re-Login (get DRIVER token)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/login",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"login"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"email\": \"{{testEmail}}\",\n  \"password\": \"{{testPassword}}\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Token received', () => pm.expect(body.data.token).to.be.a('string'));",
											"if (body.data) {",
											"    pm.collectionVariables.set('vpToken', body.data.token);",
											"}"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "03 - VP Cars",
					"item": [
						{
							"name": "VP Create Car",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"carregistration\": \"VP-123-AB\",\n  \"model\": \"Clio\",\n  \"brand\": \"VPUpdatedBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/cars",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - VP Car created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has car id', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('model matches', () => pm.expect(body.data.model).to.eql('Clio'));",
											"pm.test('licensePlate matches', () => pm.expect(body.data.licensePlate).to.eql('VP-123-AB'));",
											"if (body.data) { pm.collectionVariables.set('vpCarId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "VP List Cars",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Car",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars/{{vpCarId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"{{vpCarId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const carId = pm.collectionVariables.get('vpCarId');",
											"if (!carId) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('Has model', () => pm.expect(body.data.model).to.be.a('string'));",
											"pm.test('Has licensePlate', () => pm.expect(body.data.licensePlate).to.be.a('string'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Update Car (PUT)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"carregistration\": \"VP-456-CD\",\n  \"model\": \"Megane\",\n  \"brand\": \"VPUpdatedBrand\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/cars/{{vpCarId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"{{vpCarId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const carId = pm.collectionVariables.get('vpCarId');",
											"if (!carId) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has modelRefId', () => pm.expect(body.data.modelRefId).to.be.a('number'));",
											"pm.test('licensePlate updated', () => pm.expect(body.data.licensePlate).to.eql('VP-456-CD'));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "04 - VP Trips",
					"item": [
						{
							"name": "VP Create Trip",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"kms\": 300,\n  \"trip_datetime\": \"2026-07-01T08:00:00Z\",\n  \"available_seats\": 3,\n  \"car_id\": \"{{vpCarId}}\",\n  \"starting_address\": {\n    \"street_number\": \"1\",\n    \"street_name\": \"Rue de la Paix\",\n    \"postal_code\": \"75001\",\n    \"city_name\": \"Paris\"\n  },\n  \"arrival_address\": {\n    \"street_number\": \"10\",\n    \"street_name\": \"Place Bellecour\",\n    \"postal_code\": \"69002\",\n    \"city_name\": \"Lyon\"\n  }\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/trips",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 201 - VP Trip created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has trip id', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('kms matches', () => pm.expect(body.data.kms).to.eql(300));",
											"pm.test('seats matches', () => pm.expect(body.data.seats).to.eql(3));",
											"if (body.data) { pm.collectionVariables.set('vpTripId', body.data.id); }"
										]
									}
								}
							]
						},
						{
							"name": "VP List Trips",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP List Trips (with search filters)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips?startingcity=Paris&arrivalcity=Lyon&tripdate=2026-07-01",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips"
									],
									"query": [
										{
											"key": "startingcity",
											"value": "Paris"
										},
										{
											"key": "arrivalcity",
											"value": "Lyon"
										},
										{
											"key": "tripdate",
											"value": "2026-07-01"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Trip",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('vpTripId');",
											"if (!tripId) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('Has id', () => pm.expect(body.data.id).to.be.a('string'));",
											"pm.test('Has kms', () => pm.expect(body.data.kms).to.be.a('number'));",
											"pm.test('Has seats', () => pm.expect(body.data.seats).to.be.a('number'));"
										]
									}
								}
							]
						},
						{
							"name": "VP Patch Trip",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"available_seats\": 4\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('vpTripId');",
											"if (!tripId) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));",
											"pm.test('seats updated to 4', () => pm.expect(body.data.seats).to.eql(4));"
										]
									}
								}
							]
						},
						{
							"name": "VP Create Trip Inscription",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpInscriptionToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n  \"person_id\": \"{{vpInscriptionUserId}}\"\n}"
								},
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}/person",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}",
										"person"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const tripId = pm.collectionVariables.get('vpTripId');",
											"const personId = pm.collectionVariables.get('vpInscriptionUserId');",
											"if (!tripId || !personId) { pm.test('SKIP - No vpTripId or vpInscriptionUserId', () => true); return; }",
											"pm.test('Status 201 - Inscription created', () => pm.response.to.have.status(201));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get Trip Passengers",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}/person?page=1&limit=20",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}",
										"person"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "limit",
											"value": "20"
										}
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpTripId');",
											"if (!id) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 200', () => pm.response.to.have.status(200));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('Response has success:true', () => pm.expect(body.success).to.eql(true));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "04b - VP Not Found Tests (404)",
					"item": [
						{
							"name": "VP Get non-existent Person (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get non-existent Car (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Get non-existent Trip (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Patch non-existent Trip (404)",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"00000000-0000-0000-0000-000000000000"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"kms\": 100\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete non-existent Trip (404)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 404 - Not found', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "04c - VP Authorization Tests (403)",
					"item": [
						{
							"name": "VP List Persons (expect 403 - non-admin)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Person (expect 403 - non-admin)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/00000000-0000-0000-0000-000000000000",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"00000000-0000-0000-0000-000000000000"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Update Brand (expect 403 - non-admin)",
							"request": {
								"method": "PUT",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/brands/{{vpBrandId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands",
										"{{vpBrandId}}"
									]
								},
								"body": {
									"mode": "raw",
									"raw": "{\n  \"name\": \"ForbiddenBrand\"\n}"
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpBrandId');",
											"if (!id) { pm.test('SKIP - No vpBrandId', () => true); return; }",
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Brand (expect 403 - non-admin)",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/brands/{{vpBrandId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands",
										"{{vpBrandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpBrandId');",
											"if (!id) { pm.test('SKIP - No vpBrandId', () => true); return; }",
											"pm.test('Status 403 - Forbidden', () => pm.response.to.have.status(403));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						}
					]
				},
				{
					"name": "05 - VP Cleanup",
					"item": [
						{
							"name": "VP Delete Trip",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpTripId');",
											"if (!id) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 204 - VP Trip deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Verify Trip Deleted (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/trips/{{vpTripId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"trips",
										"{{vpTripId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpTripId');",
											"if (!id) { pm.test('SKIP - No vpTripId', () => true); return; }",
											"pm.test('Status 404 - Confirmed deleted', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Car",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars/{{vpCarId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"{{vpCarId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpCarId');",
											"if (!id) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"pm.test('Status 204 - VP Car deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Verify Car Deleted (404)",
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/cars/{{vpCarId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"cars",
										"{{vpCarId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpCarId');",
											"if (!id) { pm.test('SKIP - No vpCarId', () => true); return; }",
											"pm.test('Status 404 - Confirmed deleted', () => pm.response.to.have.status(404));",
											"pm.test('Response is JSON', () => pm.response.to.be.json);",
											"const body = pm.response.json();",
											"pm.test('success is false', () => pm.expect(body.success).to.eql(false));"
										]
									}
								}
							]
						},
						{
							"name": "VP Admin Delete Brand",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{adminToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/brands/{{vpBrandId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"brands",
										"{{vpBrandId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpBrandId');",
											"if (!id) { pm.test('SKIP - No vpBrandId', () => true); return; }",
											"pm.test('Status 204 - VP Brand deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Person",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"pm.test('Status 204 - VP Person deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						},
						{
							"name": "VP Delete Inscription Person",
							"request": {
								"method": "DELETE",
								"header": [
									{
										"key": "x-auth-token",
										"value": "{{vpInscriptionToken}}"
									},
									{
										"key": "x-vercel-protection-bypass",
										"value": "{{bypassToken}}"
									}
								],
								"url": {
									"raw": "{{baseUrlVp}}/persons/{{vpInscriptionUserId}}",
									"host": [
										"{{baseUrlVp}}"
									],
									"path": [
										"persons",
										"{{vpInscriptionUserId}}"
									]
								}
							},
							"event": [
								{
									"listen": "test",
									"script": {
										"type": "text/javascript",
										"exec": [
											"const id = pm.collectionVariables.get('vpInscriptionUserId');",
											"if (!id) { pm.test('SKIP - No vpInscriptionUserId', () => true); return; }",
											"pm.test('Status 204 - VP Inscription person deleted', () => pm.response.to.have.status(204));",
											"pm.test('Response time < 5s', () => pm.expect(pm.response.responseTime).to.be.below(5000));"
										]
									}
								}
							]
						}
					]
				}
			]
		}
	]
}
